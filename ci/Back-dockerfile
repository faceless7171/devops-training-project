FROM gradle:6.0.1-jdk8 AS builder

WORKDIR /home/gradle/project

USER root

RUN apk update

ENV GRADLE_USER_HOME /home/gradle/project

COPY backend /home/gradle/project

RUN gradle build


FROM openjdk:8-jre-alpine

EXPOSE 8080

WORKDIR /home/gradle/project

COPY --from=builder /home/gradle/project/build/libs/project-0.0.1-SNAPSHOT.jar .

ENTRYPOINT java -jar project-0.0.1-SNAPSHOT.jar